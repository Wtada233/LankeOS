# Maintainer: Wtada233 <wtada233@email.com>
pkgname=lpkg-git
_pkgname=lpkg
pkgver() {
  cd "$_pkgname"
  git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
}
pkgrel=1
pkgdesc="The LankeOS Package Manager"
arch=('x86_64' 'aarch64')
url="https://github.com/Wtada233/LankeOS"
license=('GPL-3.0-or-later')
depends=('curl' 'libarchive' 'fmt' 'openssl')
makedepends=('git' 'gcc' 'make')
provides=("${_pkgname}")
conflicts=("${_pkgname}")
source=("${_pkgname}::git+${url}.git")
sha256sums=('SKIP')

build() {
  cd "$_pkgname"
  make
}

package() {
  cd "$_pkgname"
  make DESTDIR="$pkgdir/" install
}
